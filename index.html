<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <meta name="theme-color" content="#FF0000" />
    <style>
        table {
            width: 80%;
            margin: auto;
            font-size: 20px;
        }

        table,
        td {
            border: 1px solid #333;
        }

        thead,
        tfoot {
            background-color: #333;
            color: #fff;
        }
    </style>
</head>

<body>
    <table id="myTable">
        <thead>
            <tr>
                <th colspan="2">The table header</th>
                <th>
                    <button type="button" onclick="myFunction()">Add</button>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>The table body</td>
                <td>with two columns</td>
                <td>
                    <button type="button" value="Delete" onclick="editRow(this)">Edit</button>
                    <button type="button" value="Delete" onclick="deleteRow(this)">Delete</button>
                </td>
            </tr>
        </tbody>
    </table>

    <script>
        let myFunction = () => {
            var table = document.getElementById("myTable");
            // Create an empty <tr> element
            var row = table.insertRow();
            // Insert new cells (<td> elements) at the 1st and 2nd position of the "new" <tr> element:
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            // Add some text to the new cells:
            cell1.innerHTML = "NEW CELL1";
            cell2.innerHTML = "NEW CELL2";
            cell3.innerHTML = `
<button type="button" value="Delete" onclick="editRow(this)">Edit</button>
<button type="button" value="Delete" onclick="deleteRow(this)">Delete</button>  
`
            console.log("Hi")
        }


        function deleteRow(id) {
            let row = id.parentNode.parentNode.rowIndex;
            document.getElementById("myTable").deleteRow(row);
            console.log(row)
        }

        function saveRow(id) {
            let row = id.parentNode.parentNode;
            for (var i = 0; i < row.children.length - 1; i++) {
                row.children[i].removeAttribute('contentEditable');
                row.children[i].setAttribute('style','background-color:none;');
            }
            if(!row.children[1].hasAttribute('contentEditable')){
                let btn = row.children[2].firstElementChild;
                btn.innerText = "Edit"
                btn.removeAttribute('onclick');
                btn.removeAttribute("value");
                btn.setAttribute("onclick","editRow(this)")
                btn.setAttribute("value","Edit");
            }

        }

        function editRow(id) {
            let row = id.parentNode.parentNode;
            for (var i = 0; i < row.children.length - 1; i++) {
                row.children[i].contentEditable = "true";
                row.children[i].setAttribute('style','background-color:#f3f3f3;');
            }
            if(row.children[1].hasAttribute('contentEditable')){
                let btn = row.children[2].firstElementChild;
                btn.innerText = "Save";
                btn.removeAttribute('onclick');
                btn.removeAttribute('value');
                btn.setAttribute("onclick","saveRow(this)")
                btn.setAttribute("value","Save")
                console.log('Click to Save')
            }
        }
    </script>
</body>

</html>